<div clsaa="col-md-12">
  <div class="control-section col-md-12 yooyoo">
    <ejs-grid #grid [showColumnMenu]="false" [allowReordering]="false" [gridLines]="line" [allowPaging]="true"
      [allowSorting]="true" [allowFiltering]="true" [allowExcelExport]="true" [allowGrouping]="false"
      [searchSettings]="searchSettings" [editSettings]="editSettings" [filterSettings]="filterOptions"
      [pageSettings]="pageSettings" [toolbar]="toolbar" [dataSource]="quizs" (toolbarClick)="onToolbarClick($event)"
      (actionBegin)="actionBegin($event)" (actionComplete)="actionComplete($event)" height=345>
      <e-columns>
        <e-column field="packageName" [isPrimaryKey]="true" headerText="PACKAGE NAME" textAlign="left" width="150">
        </e-column>
        <e-column field="topicName" headerText="TOPIC NAME" textAlign="left" width="150"></e-column>
        <e-column field="description" headerText="DESCRIPTION" textAlign="left" width="250"></e-column>
        <e-column field="price" headerText="PRICE" textAlign="left" width="150"></e-column>
        <e-column field="validity" headerText="VALIDITY" textAlign="left" width="150"></e-column>
        <e-column field="videoUrl" headerText="VIDEO URL" textAlign="left" width="150"></e-column>
      </e-columns>
      <ng-template #editSettingsTemplate let-data>
        <div ngForm #packageForm="ngForm" class="quiz">
          <div class="form-row">
            <div class="form-group col-md-8">
              <div class="e-float-input e-control-wrapper">
                <input class="e-input e-field" required [(ngModel)]="packageData.packageName" name="packageName"
                  id="packageName" type="text" (keydown.enter)="preventDefault($event)" />
                <span class="e-float-line"></span>
                <label class="e-float-text e-label-top" for="packageName">Package Name</label>
              </div>
            </div>
            <div class="form-group col-md-4">
              <ejs-dropdownlist [dataSource]="packageTypes" text="Select the Package Type"
                [placeholder]="'Package Type'" floatLabelType="Always" name="packageType" required></ejs-dropdownlist>
            </div>
            <div class="form-group col-md-4">
              <div class="e-float-input e-control-wrappe">
                <ejs-switch [ngModel]="
                                                              packageData.payment === '1'
                                                                ? true
                                                                : packageData.payment === '0'
                                                                ? false
                                                                : null
                                                            "
                  (ngModelChange)="packageData.payment = $event ? '1' : '0'" #payment name="payment" id="payment"
                  (keydown.enter)="preventDefault($event)"></ejs-switch>
                <span class="e-float-line"></span>
                <label class="e-float-text e-label-top switch-label" for="deleted"> Free/Paid</label>
              </div>
            </div>
            <div class="form-group col-md-4">
              <input type="file" id="fileupload" name="fileupload"
                (change)="onFileChange($event, packageData.mediaFile)" placeholder="Upload file"
                accept=".mp3,.png,.jpg, .gif, .wav" multiple />
              <!-- <span class="e-error" *ngIf="errorMsg != ''">{{
                                            errorMsg
                                          }}</span>
                                <span class="e-success" *ngIf="successMsg != ''">{{
                                            successMsg
                                          }}</span> -->
              <img class="quizmedia" [src]="packageData.mediaFile">
            </div>
          </div>
          <div class="form-row form-group col-md-12">
            <div class="e-card" *ngFor="let item of packageUrl; index as i">
              <div class="e-card-box">
                <button type="button" class="btn btn-primary btn-xs pull-right action" (click)="onClickAddQuestion()">
                  <i class="fa fa-plus"></i>
                </button>
                <button type="button" class="btn btn-danger btn-xs pull-right action" (click)="removeQuestion(i)">
                  <i class="fa fa-minus"></i>
                </button>
                <div class="form-group col-md-8">
                  <div class="e-float-input e-control-wrapper">
                    <input type="text" class="e-input e-field" required [(ngModel)]="packageData['question' + i]"
                      [name]="'question' + i" (keydown.enter)="preventDefault($event)" />
                    <span class="e-float-line"></span>
                    <label class="e-float-text e-label-top" [for]="'question' + i">URL {{ i + 1 }}</label>
                  </div>
                </div>
                <div class="form-group col-md-2">
                  <div class="e-float-input e-control-wrappe">
                    <ejs-switch
                      [ngModel]="packageData['payment'+i] === '1'? true : packageData['payment'+i] === '0'? false : null"
                      (ngModelChange)="packageData['payment'+i] = $event ? '1' : '0'" #payment name="payment" id="payment"
                      (keydown.enter)="preventDefault($event)"></ejs-switch>
                    <span class="e-float-line"></span>
                    <label class="e-float-text e-label-top switch-label" for="deleted"> Free/Paid</label>
                  </div>
                </div>
                <div class="form-group col-md-4">
                  <input type="file" id="fileupload" name="fileupload"
                    (change)="onFileChange($event, packageData['questionId' + i], i)" placeholder="Upload file"
                    accept=".mp3,.png,.jpg, .gif, .wav" multiple />
                  <!-- <span class="e-error" *ngIf="errorMsg != ''">{{
                                errorMsg
                              }}</span>
                    <span class="e-success" *ngIf="successMsg != ''">{{
                                successMsg
                              }}</span> -->
                  <img class="quizmedia" [src]="packageData['imageUrl' + i]">
                </div>
              </div>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group col-md-12">
              <div class="e-float-input e-control-wrapper">
                <textarea class="e-input e-field" [(ngModel)]="packageData.description" required name="description"
                  type="text"></textarea>
                <span class="e-float-line"></span>
                <label class="e-float-text e-label-top" for="description">Description</label>
              </div>
            </div>
            <div class="form-group col-md-6">
              <div class="e-float-input e-control-wrapper">
                <input class="e-input e-field" [(ngModel)]="packageData.cost" required name="cost" type="number" />
                <span class="e-float-line"></span>
                <label class="e-float-text e-label-top" for="cost">Cost</label>
              </div>
            </div>
            <div class="form-group col-md-6">
              <div class="e-float-input e-control-wrapper">
                <input class="e-input e-field" [(ngModel)]="packageData.discount" required name="discount"
                  type="number" />
                <span class="e-float-line"></span>
                <label class="e-float-text e-label-top" for="discount">Discount Cost</label>
              </div>
            </div>
            <div class="form-group col-md-12">
              <ejs-daterangepicker class="ml-10" [value]="packageData.validity | date:'MM/dd/yyyy'" id="daterangepicker"
                floatLabelType="Always" [placeholder]="'Validity'" strictMode="true" name="validity"
                format='dd-MMM-yyyy' [showClearButton]="false" #range>
              </ejs-daterangepicker>
            </div>
          </div>
          <div class="col-md-12">
            <div class="e-control-wrapper pull-right">
              <button type="button" [disabled]="packageForm.invalid" class="e-control e-btn e-primary e-flat"
                (click)="onSubmit()"> Save </button>
              <button type="button" class="e-control e-btn e-flat" (click)="cancel()"> Cancel </button>
            </div>
          </div>
        </div>
      </ng-template>
    </ejs-grid>
  </div>
</div>